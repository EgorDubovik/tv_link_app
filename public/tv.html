<html>
<head>
   <title>TV</title>
</head>
<body>
   <div id="qrcode"></div>
   <div id="link"></div>

   <script>
      fetch('/qrcode')
         .then(response => response.json())
         .then(data => {
            document.getElementById('qrcode').innerHTML = "<img src='"+data.url+"' />"; 
            document.getElementById('link').innerHTML = data.qrData;
            const ws = new WebSocket(data.wsLink);
            ws.onopen = () => {
               console.log('WebSocket Client Connected');
            };
            ws.onclose = () => {
               console.log('WebSocket Client Disconnected');
            };
            ws.onmessage = (message) => {
               console.log(message.data);
            };
         });
   </script>
</html>